let restaurant;var newMap;document.addEventListener("DOMContentLoaded",e=>{initMap(),registerServiceWorker()}),initMap=(()=>{fetchRestaurantFromURL((e,t)=>{e?console.error(e):(self.newMap=L.map("map",{center:[t.latlng.lat,t.latlng.lng],zoom:16,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoibGVtYSIsImEiOiJjamt0YXVla2MwM3NjM3dvZHQ0NDIwZmVpIn0.pOEFaPY6enCchIG29Lo2SQ",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(newMap),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.newMap))})}),fetchRestaurantFromURL=(e=>{if(self.restaurant)return void e(null,self.restaurant);const t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,(t,a)=>{self.restaurant=a,a?(fillRestaurantHTML(),e(null,a)):console.error(t)}):(error="No restaurant id in URL",e(error,null))}),fillRestaurantHTML=((e=self.restaurant)=>{document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address,document.getElementById("restaurant-picture").className="restaurant-picture";const t=document.getElementById("source-1");t.media="(min-width: 750px)",t.srcset=`${DBHelper.imageUrlBasePath}${DBHelper.imageNameForRestaurant(e)}-800_large_1x.jpg 1x`,t.srcset+=`,${DBHelper.imageUrlBasePath}${DBHelper.imageNameForRestaurant(e)}-1200_large_2x.jpg 2x`;const a=document.getElementById("source-2");a.media="(min-width: 500px)",a.srcset=`${DBHelper.imageUrlBasePath}${DBHelper.imageNameForRestaurant(e)}-medium.jpg`;const n=document.getElementById("restaurant-img");n.className="restaurant-img",n.src=DBHelper.imageUrlForRestaurant(e),n.alt="Image of the restaurant "+e.name,document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()}),fillRestaurantHoursHTML=((e=self.restaurant.operating_hours)=>{const t=document.getElementById("restaurant-hours");for(let a in e){const n=document.createElement("tr"),r=document.createElement("td");r.innerHTML=a,n.appendChild(r);const s=document.createElement("td");s.innerHTML=e[a],n.appendChild(s),t.appendChild(n)}}),fillReviewsHTML=((e=self.restaurant.reviews)=>{const t=document.getElementById("reviews-container"),a=document.createElement("h2");if(a.innerHTML="Reviews",t.appendChild(a),!e){const e=document.createElement("p");return e.innerHTML="No reviews yet!",void t.appendChild(e)}const n=document.getElementById("reviews-list");e.forEach(e=>{n.appendChild(createReviewHTML(e))}),t.appendChild(n)}),createReviewHTML=(e=>{const t=document.createElement("li"),a=document.createElement("div");a.className="review-header",t.appendChild(a);const n=document.createElement("h3");n.innerHTML=e.name,a.appendChild(n);const r=document.createElement("span");r.innerHTML=e.date,r.className="review-date",a.appendChild(r);const s=document.createElement("div");s.className="review-body",t.appendChild(s);const l=document.createElement("span");l.innerHTML=`Rating: ${e.rating}`,l.className="review-rating",s.appendChild(l);const o=document.createElement("p");return o.innerHTML=e.comments,s.appendChild(o),t}),fillBreadcrumb=((e=self.restaurant)=>{const t=document.getElementById("breadcrumb"),a=document.createElement("li");a.innerHTML=e.name,t.appendChild(a)}),getParameterByName=((e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const a=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJyZXN0YXVyYW50IiwibmV3TWFwIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJpbml0TWFwIiwicmVnaXN0ZXJTZXJ2aWNlV29ya2VyIiwiZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCIsImVycm9yIiwiY29uc29sZSIsInNlbGYiLCJMIiwibWFwIiwibGF0bG5nIiwibGF0IiwibG5nIiwiY2VudGVyIiwiem9vbSIsInRpbGVMYXllciIsIm1hcGJveFRva2VuIiwibWF4Wm9vbSIsImlkIiwiYWRkVG8iLCJmaWxsQnJlYWRjcnVtYiIsIkRCSGVscGVyIiwibWFwTWFya2VyRm9yUmVzdGF1cmFudCIsImNhbGxiYWNrIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwiZmV0Y2hSZXN0YXVyYW50QnlJZCIsImZpbGxSZXN0YXVyYW50SFRNTCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwibmFtZSIsImFkZHJlc3MiLCJzcmMxIiwic3Jjc2V0IiwiaW1hZ2VOYW1lRm9yUmVzdGF1cmFudCIsInBpY3R1cmUiLCJpbWFnZVVybEJhc2VQYXRoIiwibWVkaWEiLCJzcmMyIiwiaW1hZ2UiLCJjbGFzc05hbWUiLCJjdWlzaW5lIiwib3BlcmF0aW5nX2hvdXJzIiwiZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwiLCJmaWxsUmV2aWV3c0hUTUwiLCJvcGVyYXRpbmdIb3VycyIsImhvdXJzIiwiZGF5Iiwicm93IiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVFbGVtZW50IiwidGltZSIsInJldmlld3MiLCJjb250YWluZXIiLCJ0aXRsZSIsIm5vUmV2aWV3cyIsInVsIiwiZm9yRWFjaCIsInJldmlldyIsImNyZWF0ZVJldmlld0hUTUwiLCJsaSIsImRpdiIsImRhdGUiLCJib2R5IiwicmF0aW5nIiwiY29tbWVudHMiLCJicmVhZGNydW1iIiwid2luZG93IiwibG9jYXRpb24iLCJ1cmwiLCJyZWdleCIsImhyZWYiLCJyZXN1bHRzIiwiUmVnRXhwIiwiZXhlYyIsImRlY29kZVVSSUNvbXBvbmVudCIsInJlcGxhY2UiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLFdBQ0osSUFBSUMsT0FLSkMsU0FBU0MsaUJBQWlCLG1CQUFxQkMsSUFDN0NDLFVBQ0FDLDBCQU1GRCxRQUFVLE1BQ1JFLHVCQUF1QixDQUFDQyxFQUFPUixLQUN6QlEsRUFBU0MsUUFBQUQsTUFBQUEsSUFBYkUsS0FFT1QsT0FBQVUsRUFBQUMsSUFBQSxNQUFBLENBQ0xGLE9BQUtULENBQUxELEVBQW9CYSxPQUFPQyxJQUFBZCxFQUFBYSxPQUFBRSxLQUN6QkMsS0FBTSxHQUNOQyxpQkFGeUIsSUFBQU4sRUFBM0JPLFVBQUEsb0ZBQUEsQ0FLRUEsWUFBVSx3RkFDVkMsUUFBQUEsR0FDQUMsWUFGK0YsME5BQWpHQyxHQU9HQyxtQkFDSEMsTUFBQUEsUUFDQUMsaUJBQ0RBLFNBQUFDLHVCQUFBZixLQUFBVixXQUFBVSxLQUFBVCxhQXVCTE0sdUJBQTBCbUIsQ0FBQUEsSUFDeEIsR0FBSWhCLEtBQUtWLFdBQ1AwQixZQURxQkEsRUFBQSxLQUFBaEIsS0FBQVYsWUFHdEIsTUFBQXFCLEVBQUFNLG1CQUFBLE1BRUlOLEVBQU1HLFNBQUFJLG9CQUFBUCxFQUFBLENBQUFiLEVBQUFSLEtBQ1RRLEtBQUtSLFdBQUdBLEVBQ1IwQixHQVFFRyxxQkFKQUgsRUFBSzFCLEtBQUxBLElBTkpTLFFBR09ELE1BQUFBLE1BSlBBLE1BQVEsMEJBR05rQixFQUFTbEIsTUFBTyxTQVdqQnFCLG1CQUFBLEVBQUE3QixFQUFBVSxLQUFBVixjQW5CSEUsU0FBQTRCLGVBQUEsbUJBc0JBQyxVQUFBL0IsRUFBQWdDLEtBT2tCOUIsU0FBUzRCLGVBQWUsc0JBQ2hDQyxVQUFZL0IsRUFBV2lDLFFBTGYvQixTQUFJRixlQUFrQkEsc0JBQ2hDZ0MsVUFBTzlCLHFCQUdiLE1BQU0rQixFQUFPL0IsU0FBR0EsZUFBUzRCLFlBQ3pCRyxFQUFBQSxNQUFRRixxQkFFUkcsRUFBQUMsVUFBZ0Jq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RSxJQUFBQyxjQUFBM0Msc0JBRUE0QyxLQUFBTCxHQUNGLE9BQUFHLEVBRktBLEVBQVEsR0FFTkcsbUJBQW1CSCxFQUFRLEdBQUdJLFFBQVEsTUFBTyxNQUQzQyxHQVRYIiwiZmlsZSI6InJlc3RhdXJhbnRfaW5mby5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCByZXN0YXVyYW50O1xudmFyIG5ld01hcDtcblxuLyoqXG4gKiBJbml0aWFsaXplIG1hcCBhcyBzb29uIGFzIHRoZSBwYWdlIGlzIGxvYWRlZC5cbiAqL1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIChldmVudCkgPT4geyAgXG4gIGluaXRNYXAoKTtcbiAgcmVnaXN0ZXJTZXJ2aWNlV29ya2VyKCk7XG59KTtcblxuLyoqXG4gKiBJbml0aWFsaXplIGxlYWZsZXQgbWFwXG4gKi9cbmluaXRNYXAgPSAoKSA9PiB7XG4gIGZldGNoUmVzdGF1cmFudEZyb21VUkwoKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0gZWxzZSB7ICAgICAgXG4gICAgICBzZWxmLm5ld01hcCA9IEwubWFwKCdtYXAnLCB7XG4gICAgICAgIGNlbnRlcjogW3Jlc3RhdXJhbnQubGF0bG5nLmxhdCwgcmVzdGF1cmFudC5sYXRsbmcubG5nXSxcbiAgICAgICAgem9vbTogMTYsXG4gICAgICAgIHNjcm9sbFdoZWVsWm9vbTogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgTC50aWxlTGF5ZXIoJ2h0dHBzOi8vYXBpLnRpbGVzLm1hcGJveC5jb20vdjQve2lkfS97en0ve3h9L3t5fS5qcGc3MD9hY2Nlc3NfdG9rZW49e21hcGJveFRva2VufScsIHtcbiAgICAgICAgbWFwYm94VG9rZW46ICdway5leUoxSWpvaWJHVnRZU0lzSW1FaU9pSmphbXQwWVhWbGEyTXdNM05qTTNkdlpIUTBOREl3Wm1WcEluMC5wT0VGYVBZNmVuQ2NoSUcyOUxvMlNRJyxcbiAgICAgICAgbWF4Wm9vbTogMTgsXG4gICAgICAgIGF0dHJpYnV0aW9uOiAnTWFwIGRhdGEgJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9cIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICcgK1xuICAgICAgICAgICc8YSBocmVmPVwiaHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LXNhLzIuMC9cIj5DQy1CWS1TQTwvYT4sICcgK1xuICAgICAgICAgICdJbWFnZXJ5IMKpIDxhIGhyZWY9XCJodHRwczovL3d3dy5tYXBib3guY29tL1wiPk1hcGJveDwvYT4nLFxuICAgICAgICBpZDogJ21hcGJveC5zdHJlZXRzJyAgICBcbiAgICAgIH0pLmFkZFRvKG5ld01hcCk7XG4gICAgICBmaWxsQnJlYWRjcnVtYigpO1xuICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChzZWxmLnJlc3RhdXJhbnQsIHNlbGYubmV3TWFwKTtcbiAgICB9XG4gIH0pO1xufSAgXG4gXG4vKiB3aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcbiAgZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCgoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcbiAgICAgICAgem9vbTogMTYsXG4gICAgICAgIGNlbnRlcjogcmVzdGF1cmFudC5sYXRsbmcsXG4gICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICBmaWxsQnJlYWRjcnVtYigpO1xuICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChzZWxmLnJlc3RhdXJhbnQsIHNlbGYubWFwKTtcbiAgICB9XG4gIH0pO1xufSAqL1xuXG4vKipcbiAqIEdldCBjdXJyZW50IHJlc3RhdXJhbnQgZnJvbSBwYWdlIFVSTC5cbiAqL1xuZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCA9IChjYWxsYmFjaykgPT4ge1xuICBpZiAoc2VsZi5yZXN0YXVyYW50KSB7IC8vIHJlc3RhdXJhbnQgYWxyZWFkeSBmZXRjaGVkIVxuICAgIGNhbGxiYWNrKG51bGwsIHNlbGYucmVzdGF1cmFudClcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgaWQgPSBnZXRQYXJhbWV0ZXJCeU5hbWUoJ2lkJyk7XG4gIGlmICghaWQpIHsgLy8gbm8gaWQgZm91bmQgaW4gVVJMXG4gICAgZXJyb3IgPSAnTm8gcmVzdGF1cmFudCBpZCBpbiBVUkwnXG4gICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICB9IGVsc2Uge1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xuICAgICAgc2VsZi5yZXN0YXVyYW50ID0gcmVzdGF1cmFudDtcbiAgICAgIGlmICghcmVzdGF1cmFudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZmlsbFJlc3RhdXJhbnRIVE1MKCk7XG4gICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIHJlc3RhdXJhbnQgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlXG4gKi9cbmZpbGxSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50ID0gc2VsZi5yZXN0YXVyYW50KSA9PiB7XG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1uYW1lJyk7XG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1hZGRyZXNzJyk7XG4gIGFkZHJlc3MuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5hZGRyZXNzO1xuXG4gIGNvbnN0IHBpY3R1cmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1waWN0dXJlJyk7XG4gIHBpY3R1cmUuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtcGljdHVyZSc7XG5cbiAgY29uc3Qgc3JjMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2UtMScpO1xuICBzcmMxLm1lZGlhID0gXCIobWluLXdpZHRoOiA3NTBweClcIlxuICBzcmMxLnNyY3NldCA9IGAke0RCSGVscGVyLmltYWdlVXJsQmFzZVBhdGh9JHtEQkhlbHBlci5pbWFnZU5hbWVGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpfS04MDBfbGFyZ2VfMXguanBnIDF4YDtcbiAgc3JjMS5zcmNzZXQgKz0gYCwke0RCSGVscGVyLmltYWdlVXJsQmFzZVBhdGh9JHtEQkhlbHBlci5pbWFnZU5hbWVGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpfS0xMjAwX2xhcmdlXzJ4LmpwZyAyeGA7XG5cbiAgY29uc3Qgc3JjMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2UtMicpO1xuICBzcmMyLm1lZGlhID0gXCIobWluLXdpZHRoOiA1MDBweClcIlxuICBzcmMyLnNyY3NldCA9IGAke0RCSGVscGVyLmltYWdlVXJsQmFzZVBhdGh9JHtEQkhlbHBlci5pbWFnZU5hbWVGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpfS1tZWRpdW0uanBnYDtcblxuICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWltZycpO1xuICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnXG4gIGltYWdlLnNyYyA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcbiAgaW1hZ2UuYWx0ID0gXCJJbWFnZSBvZiB0aGUgcmVzdGF1cmFudCBcIiArIHJlc3RhdXJhbnQubmFtZTtcblxuICBjb25zdCBjdWlzaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtY3Vpc2luZScpO1xuICBjdWlzaW5lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuY3Vpc2luZV90eXBlO1xuXG4gIC8vIGZpbGwgb3BlcmF0aW5nIGhvdXJzXG4gIGlmIChyZXN0YXVyYW50Lm9wZXJhdGluZ19ob3Vycykge1xuICAgIGZpbGxSZXN0YXVyYW50SG91cnNIVE1MKCk7XG4gIH1cbiAgLy8gZmlsbCByZXZpZXdzXG4gIGZpbGxSZXZpZXdzSFRNTCgpO1xufVxuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IG9wZXJhdGluZyBob3VycyBIVE1MIHRhYmxlIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmZpbGxSZXN0YXVyYW50SG91cnNIVE1MID0gKG9wZXJhdGluZ0hvdXJzID0gc2VsZi5yZXN0YXVyYW50Lm9wZXJhdGluZ19ob3VycykgPT4ge1xuICBjb25zdCBob3VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWhvdXJzJyk7XG4gIGZvciAobGV0IGtleSBpbiBvcGVyYXRpbmdIb3Vycykge1xuICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICBjb25zdCBkYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgIGRheS5pbm5lckhUTUwgPSBrZXk7XG4gICAgcm93LmFwcGVuZENoaWxkKGRheSk7XG5cbiAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICB0aW1lLmlubmVySFRNTCA9IG9wZXJhdGluZ0hvdXJzW2tleV07XG4gICAgcm93LmFwcGVuZENoaWxkKHRpbWUpO1xuXG4gICAgaG91cnMuYXBwZW5kQ2hpbGQocm93KTtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhbGwgcmV2aWV3cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cbiAqL1xuZmlsbFJldmlld3NIVE1MID0gKHJldmlld3MgPSBzZWxmLnJlc3RhdXJhbnQucmV2aWV3cykgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1jb250YWluZXInKTtcbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICB0aXRsZS5pbm5lckhUTUwgPSAnUmV2aWV3cyc7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgaWYgKCFyZXZpZXdzKSB7XG4gICAgY29uc3Qgbm9SZXZpZXdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIG5vUmV2aWV3cy5pbm5lckhUTUwgPSAnTm8gcmV2aWV3cyB5ZXQhJztcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobm9SZXZpZXdzKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0Jyk7XG4gIHJldmlld3MuZm9yRWFjaChyZXZpZXcgPT4ge1xuICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSk7XG4gIH0pO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodWwpO1xufVxuXG4vKipcbiAqIENyZWF0ZSByZXZpZXcgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlLlxuICovXG5jcmVhdGVSZXZpZXdIVE1MID0gKHJldmlldykgPT4ge1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBkaXYuY2xhc3NOYW1lID0gXCJyZXZpZXctaGVhZGVyXCI7XG4gIGxpLmFwcGVuZENoaWxkKGRpdik7XG5cbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gIG5hbWUuaW5uZXJIVE1MID0gcmV2aWV3Lm5hbWU7XG4gIGRpdi5hcHBlbmRDaGlsZChuYW1lKTtcblxuICBjb25zdCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICBkYXRlLmlubmVySFRNTCA9IHJldmlldy5kYXRlO1xuICBkYXRlLmNsYXNzTmFtZSA9IFwicmV2aWV3LWRhdGVcIjtcbiAgZGl2LmFwcGVuZENoaWxkKGRhdGUpO1xuXG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgYm9keS5jbGFzc05hbWUgPSBcInJldmlldy1ib2R5XCI7XG4gIGxpLmFwcGVuZENoaWxkKGJvZHkpO1xuXG4gIGNvbnN0IHJhdGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgcmF0aW5nLmlubmVySFRNTCA9IGBSYXRpbmc6ICR7cmV2aWV3LnJhdGluZ31gO1xuICByYXRpbmcuY2xhc3NOYW1lID0gXCJyZXZpZXctcmF0aW5nXCJcbiAgYm9keS5hcHBlbmRDaGlsZChyYXRpbmcpO1xuXG4gIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBjb21tZW50cy5pbm5lckhUTUwgPSByZXZpZXcuY29tbWVudHM7XG4gIGJvZHkuYXBwZW5kQ2hpbGQoY29tbWVudHMpO1xuXG4gIHJldHVybiBsaTtcbn1cblxuLyoqXG4gKiBBZGQgcmVzdGF1cmFudCBuYW1lIHRvIHRoZSBicmVhZGNydW1iIG5hdmlnYXRpb24gbWVudVxuICovXG5maWxsQnJlYWRjcnVtYiA9IChyZXN0YXVyYW50PXNlbGYucmVzdGF1cmFudCkgPT4ge1xuICBjb25zdCBicmVhZGNydW1iID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFkY3J1bWInKTtcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICBsaS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XG4gIGJyZWFkY3J1bWIuYXBwZW5kQ2hpbGQobGkpO1xufVxuXG4vKipcbiAqIEdldCBhIHBhcmFtZXRlciBieSBuYW1lIGZyb20gcGFnZSBVUkwuXG4gKi9cbmdldFBhcmFtZXRlckJ5TmFtZSA9IChuYW1lLCB1cmwpID0+IHtcbiAgaWYgKCF1cmwpXG4gICAgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csICdcXFxcJCYnKTtcbiAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBbPyZdJHtuYW1lfSg9KFteJiNdKil8JnwjfCQpYCksXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcbiAgaWYgKCFyZXN1bHRzKVxuICAgIHJldHVybiBudWxsO1xuICBpZiAoIXJlc3VsdHNbMl0pXG4gICAgcmV0dXJuICcnO1xuICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXFwrL2csICcgJykpO1xufVxuIl19
