importScripts("libs.js"),self.addEventListener("message",e=>{switch(e.data.cmd){case"fetch_reviews":DBHelper.fetchRestaurantReviewsById(e.data.id,(s,a)=>{s?postMessage({cmd:e.data.cmd,error:s}):postMessage({cmd:e.data.cmd,error:null,reviews:a})});break;case"sync_reviews":DBHelper.syncReviews();break;case"fetch_cuisines":DBHelper.fetchCuisines((s,a)=>{s?postMessage({cmd:e.data.cmd,error:s}):postMessage({cmd:e.data.cmd,error:null,cuisines:a})});break;case"fetch_restaurant_cuisine_neighborhood":DBHelper.fetchRestaurantByCuisineAndNeighborhood(e.data.cuisine,e.data.neighborhood,(s,a)=>{s?postMessage({cmd:e.data.cmd,error:s}):postMessage({cmd:e.data.cmd,error:null,restaurants:a})});break;case"fetch_neighborhoods":DBHelper.fetchNeighborhoods((s,a)=>{s?postMessage({cmd:e.data.cmd,error:s}):postMessage({cmd:e.data.cmd,error:null,neighborhoods:a})});break;case"fetch_restaurant":DBHelper.fetchRestaurantById(e.data.id,(s,a)=>{a||postMessage({cmd:e.data.cmd,error:s}),postMessage({cmd:e.data.cmd,error:null,restaurant:a})})}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndvcmtlci5qcyJdLCJuYW1lcyI6WyJpbXBvcnRTY3JpcHRzIiwic2VsZiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiZGF0YSIsImNtZCIsIkRCSGVscGVyIiwiZXJyb3IiLCJmZXRjaFJlc3RhdXJhbnRSZXZpZXdzQnlJZCIsImlkIiwicmV2aWV3cyIsInBvc3RNZXNzYWdlIiwic3luY1Jldmlld3MiLCJmZXRjaEN1aXNpbmVzIiwiY3Vpc2luZXMiLCJmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QiLCJjdWlzaW5lIiwibmVpZ2hib3Job29kIiwicmVzdGF1cmFudHMiLCJmZXRjaE5laWdoYm9yaG9vZHMiLCJuZWlnaGJvcmhvb2RzIiwiZmV0Y2hSZXN0YXVyYW50QnlJZCIsInJlc3RhdXJhbnQiXSwibWFwcGluZ3MiOiJBQUFBQSxjQUFjLFdBR2JDLEtBQUFDLGlCQUFBLFVBQUFDLElBQ08sT0FBQUEsRUFBS0MsS0FBQUMsS0FDREMsSUFBQUEsZ0JBQ1FDLFNBQU9DLDJCQUFBTCxFQUFBQyxLQUFBSyxHQUFBLENBQUFGLEVBQUFHLEtBQ1BDLEVBQ1dQLFlBREMsQ0FFREcsSUFBQUEsRUFBQUEsS0FBQUEsSUFGWEEsTUFBQUEsSUFRV0ksWUFGQyxDQUdDRCxJQUFBQSxFQUFBQSxLQUFBQSxJQUhiSCxNQUFBLEtBS0hHLFFBQUFBLE1BR0osTUFDREosSUFBQUEsZUFDQUEsU0FBQU0sY0FBQSxNQUNWLElBQUEsaUJBQ1VOLFNBQVNPLGNBQWMsQ0FBQU4sRUFBUU8sS0FDaEJQLEVBQ1BJLFlBQVksQ0FDSU4sSUFESkYsRUFBQUMsS0FBQUMsSUFFREUsTUFBQUEsSUFLQUgsWUFEQyxDQUFBQyxJQUFBRixFQUFBQyxLQUFBQyxJQUdFUyxNQUFBQSxLQUhkQSxTQUFBQSxNQU9SLE1BQ1YsSUFBQSx3Q0FDQ1IsU0FBQUEsd0NBQVNTLEVBQVRYLEtBQW1EQSxRQUFLWSxFQUF4RFosS0FBbUVBLGFBQUthLENBQXhFVixFQUF1RkEsS0FDbkZBLEVBQ0dJLFlBQVksQ0FDWE4sSUFBR0YsRUFBR0MsS0FBREMsSUFDTEUsTUFBS0EsSUFLVkYsWUFBS0YsQ0FDTEksSUFBQUEsRUFBQUEsS0FBS0YsSUFDTGEsTUFBQUEsS0FIV0EsWUFBWkEsTUFPSCxNQUNBLElBQUEsc0JBQ0NaLFNBQUFBLG1CQUFTYSxDQUFBQSxFQUFvQlosS0FDekJBLEVBQ0dJLFlBQVksQ0FDWE4sSUFBR0YsRUFBR0MsS0FBREMsSUFDTEUsTUFBS0EsSUFLVkYsWUFBS0YsQ0FDTEksSUFBQUEsRUFBQUEsS0FBS0YsSUFDTGUsTUFBQUEsS0FIV0EsY0FBWkEsTUFPRixNQUNELElBQUEsbUJBQ0lkLFNBQVNlLG9CQUFvQmxCLEVBQUVDLEtBQUtLLEdBQUksQ0FBQ0YsRUFBT2UsS0FDekNBLEdBQ0pYLFlBQVcsQ0FDVk4sSUFBR0YsRUFBRUEsS0FBRUMsSUFDUEcsTUFBS0EsSUFJUEksWUFBWSxDQUNYTixJQUFHRixFQUFHQyxLQUFEQyxJQUNMRSxNQUFLLEtBQ0xlLFdBQVVBIiwiZmlsZSI6Indvcmtlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydFNjcmlwdHMoJ2xpYnMuanMnKTtcblxuc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZSA9PiB7XG5cdHN3aXRjaChlLmRhdGEuY21kKSB7XG4gICAgICAgIGNhc2UgJ2ZldGNoX3Jldmlld3MnOlxuICAgICAgICAgICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50UmV2aWV3c0J5SWQoZS5kYXRhLmlkLCAoZXJyb3IsIHJldmlld3MpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY21kOiBlLmRhdGEuY21kLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbWQ6IGUuZGF0YS5jbWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldmlld3M6IHJldmlld3NcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc3luY19yZXZpZXdzJzpcbiAgICAgICAgICAgIERCSGVscGVyLnN5bmNSZXZpZXdzKCk7XG4gICAgICAgICAgICBicmVhaztcblx0XHRjYXNlICdmZXRjaF9jdWlzaW5lcyc6XG4gICAgICAgICAgICBEQkhlbHBlci5mZXRjaEN1aXNpbmVzKChlcnJvciwgY3Vpc2luZXMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY21kOiBlLmRhdGEuY21kLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbWQ6IGUuZGF0YS5jbWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1aXNpbmVzOiBjdWlzaW5lc1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXHRcdGNhc2UgJ2ZldGNoX3Jlc3RhdXJhbnRfY3Vpc2luZV9uZWlnaGJvcmhvb2QnOlxuXHRcdFx0REJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kKGUuZGF0YS5jdWlzaW5lLCBlLmRhdGEubmVpZ2hib3Job29kLCAoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XG5cdFx0ICAgIFx0aWYgKGVycm9yKSB7XG5cdFx0XHQgICAgICBcdHBvc3RNZXNzYWdlKHtcblx0XHRcdCAgICAgIFx0XHRjbWQ6IGUuZGF0YS5jbWQsXG5cdFx0XHQgICAgICBcdFx0ZXJyb3I6IGVycm9yLFxuXHRcdFx0ICAgICAgXHR9KTtcblx0XHQgICAgXHR9IFxuXHRcdCAgICBcdGVsc2Uge1xuXHRcdFx0XHRcdHBvc3RNZXNzYWdlKHtcblx0XHRcdFx0XHRcdGNtZDogZS5kYXRhLmNtZCxcblx0XHRcdFx0XHRcdGVycm9yOiBudWxsLFxuXHRcdFx0XHRcdFx0cmVzdGF1cmFudHM6IHJlc3RhdXJhbnRzXG5cdFx0XHRcdFx0fSk7XG5cdFx0ICAgIFx0fVxuXHRcdFx0fSk7XG5cdFx0YnJlYWs7XG5cdFx0Y2FzZSAnZmV0Y2hfbmVpZ2hib3Job29kcyc6XG5cdFx0XHREQkhlbHBlci5mZXRjaE5laWdoYm9yaG9vZHMoKGVycm9yLCBuZWlnaGJvcmhvb2RzKSA9PiB7XG5cdFx0ICAgIFx0aWYgKGVycm9yKSB7XG5cdFx0XHQgICAgICBcdHBvc3RNZXNzYWdlKHtcblx0XHRcdCAgICAgIFx0XHRjbWQ6IGUuZGF0YS5jbWQsXG5cdFx0XHQgICAgICBcdFx0ZXJyb3I6IGVycm9yLFxuXHRcdFx0ICAgICAgXHR9KTtcblx0XHQgICAgXHR9IFxuXHRcdCAgICBcdGVsc2Uge1xuXHRcdFx0XHRcdHBvc3RNZXNzYWdlKHtcblx0XHRcdFx0XHRcdGNtZDogZS5kYXRhLmNtZCxcblx0XHRcdFx0XHRcdGVycm9yOiBudWxsLFxuXHRcdFx0XHRcdFx0bmVpZ2hib3Job29kczogbmVpZ2hib3Job29kc1xuXHRcdFx0XHRcdH0pO1xuXHRcdCAgICBcdH1cblx0ICBcdFx0fSk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdmZXRjaF9yZXN0YXVyYW50Jzpcblx0XHQgICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlJZChlLmRhdGEuaWQsIChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xuXHRcdCAgICAgIGlmICghcmVzdGF1cmFudCkge1xuXHRcdCAgICAgIFx0cG9zdE1lc3NhZ2Uoe1xuXHRcdCAgICAgIFx0XHRjbWQ6IGUuZGF0YS5jbWQsXG5cdFx0ICAgICAgXHRcdGVycm9yOiBlcnJvcixcblx0XHQgICAgICBcdH0pO1xuXHRcdCAgICAgIH1cblx0XHQgICAgICBcblx0XHQgICAgICBwb3N0TWVzc2FnZSh7XG5cdFx0ICAgICAgXHRjbWQ6IGUuZGF0YS5jbWQsXG5cdFx0ICAgICAgXHRlcnJvcjogbnVsbCxcblx0XHQgICAgICBcdHJlc3RhdXJhbnQ6IHJlc3RhdXJhbnRcblx0XHQgICAgICB9KTtcblx0XHQgICAgfSk7XG5cdFx0XHRicmVhaztcblx0fVxufSk7Il19
